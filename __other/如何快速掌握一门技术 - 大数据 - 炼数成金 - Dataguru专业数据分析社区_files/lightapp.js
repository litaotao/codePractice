void function(winElement,docElement){function getQueryStr(a){var b=String(window.document.location.href),c=new RegExp("(^|)"+a+"=([^&]*)(&|$)","gi").exec(b);return c?c[2]:0}function setCookie(a,b,c){c=c||15;var d=new Date;d.setTime((new Date).getTime()+1e3*c);try{docElement.cookie=a+"="+escape(b)+";path=/;expires="+d.toGMTString()}catch(e){}}function getCookie(a){var b=docElement.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?unescape(b[2]):null}function findParent(a,b){for(var c=0;b;){if((b.nodeName||b.tagName).toLowerCase()===a.toLowerCase())return b;if(c>=4)return null;c++,b=b.parentNode}return null}function getAppStart(){var hash_ts=getQueryStr("bd_ts"),start=0,refer=docElement.referrer,now=+new Date,hash_cookie=getCookie("bd_hash"),st=getCookie("bd_st");if(st){try{setCookie("bd_st","",-1),st=eval(st)}catch(e){st={}}st.r&&refer.replace(/#.*/,"").slice(-50)!=st.r||(start=st.s)}else refer.indexOf("baidu.com")>-1&&hash_ts>0&&7==String(hash_ts).length&&hash_cookie!=hash_ts&&(setCookie("bd_hash",hash_ts,30),start=parseInt((now+"").slice(0,6)+hash_ts,10));return now-start>=2e4&&(start=0),start}function extend(a,b){for(var c in a)c&&(b[c]=a[c]);return b}window.bd||(window.bd={}),window.bd._qdc={_v:1,_timing:{},_random:Math.random(),_st:getAppStart(),_is_send:!1,_opt:{sample:.5,log_path:"http://static.tieba.baidu.com/tb/opms/img/st.gif",items:["lt"]},_check:function(){for(var a=this._opt.items,b=this._timing,c=!0,d=a.length-1;d>=0;d--)b.hasOwnProperty(a[d])||(c=!1);c&&this.send()},init:function(a){extend(a,this._opt),a&&a.app_id&&"undefined"!=typeof clouda&&(clouda.lego||(clouda.lego={}),clouda.lego._initSmartBar&&clouda.lego._initSmartBar(a.app_id))},mark:function(a,b){this._st>0&&(this._timing[a]=b||+new Date-this._st,this._check())},first_screen:function(){var a=document.getElementsByTagName("img"),b=+new Date,c=[],d=this;this._setFS=function(){for(var a=d._opt.fsHeight||document.documentElement.clientHeight,e=0;e<c.length;e++){var f=c[e],g=f.img,h=f.time,i=g.offsetTop||0;i>0&&a>i&&(b=h>b?h:b)}d._timing.fs=b-d._st};for(var e=function(){this.removeEventListener&&this.removeEventListener("load",e,!1),c.push({img:this,time:+new Date})},f=0;f<a.length;f++){var g=a[f];g.addEventListener&&!g.complete&&g.addEventListener("load",e,!1)}},send:function(){if(this._random<this._opt.sample&&this._st>0&&!this._is_send){this._is_send=!0;var a=this._timing,b=[];for(var c in a)b.push(c+"="+a[c]);b.push("_t="+1*new Date);var d=document.createElement("img");d.src=this._opt.log_path+"?type=bdapp&v="+this._v+"&app_id="+this._opt.app_id+"&"+b.join("&")}}},docElement.addEventListener("DOMContentLoaded",function(){bd._qdc.mark("drt")},!1),winElement.addEventListener("load",function(){"function"==typeof bd._qdc._setFS&&bd._qdc._setFS(),bd._qdc.mark("lt")}),docElement.addEventListener("click",function(a){a=a||window.event;var b=a.target||a.srcElement,c=findParent("a",b);if(c){var d=c.getAttribute("href");/^#|javascript:/.test(d)||setCookie("bd_st",'({"s":'+ +new Date+',"r":"'+docElement.URL.replace(/#.*/,"").slice(-50)+'"})')}},!1),bd._qdc.mark("ht")}(window,document),function(){function loadScript(a,b){var c,d,e,f=document.head||document.getElementsByTagName("head")[0]||document.documentElement;"object"==typeof a&&(d=a,a=void 0),e=d||{},a=a||e.url,b=b||e.success,c=document.createElement("script"),c.async=e.async||!1,c.type="text/javascript",e.charset&&(c.charset=e.charset),c.src=a,f.insertBefore(c,f.firstChild),"function"==typeof b&&(document.addEventListener?c.addEventListener("load",b,!1):c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&(c.onreadystatechange=null,b())})}function initStack(modules){for(var r_apis=modules,api_tmp,type,i=r_apis.length-1;i>=0;i--){clouda.device||(clouda.device={}),clouda.mbaas||(clouda.mbaas={}),clouda.lego||(clouda.lego={}),api_tmp=device_apis[r_apis[i]]?device_apis[r_apis[i]]:!1;var legoApiTmp=lego_apis[r_apis[i]]?lego_apis[r_apis[i]]:!1;if(api_tmp?type="device":legoApiTmp?(type="lego",api_tmp=legoApiTmp):(type="mbaas",api_tmp=mbaas_apis[r_apis[i]]?mbaas_apis[r_apis[i]]:!1),"undefined"==typeof eval("clouda."+type+"['"+r_apis[i]+"']")&&api_tmp){eval("clouda."+type+"['"+r_apis[i]+"'] ={}");for(var f_str,j=0,len=api_tmp.length;len>j;j++)f_str="function(){stack.push({func:'clouda."+type+"."+r_apis[i]+"."+api_tmp[j]+"',arg:arguments});}",eval("clouda."+type+"['"+r_apis[i]+"']['"+api_tmp[j]+"'] ="+f_str)}}}function handleStorage(a,b){var c="";if(a){a=JSON.parse(a);for(var d in a)c+=d+"["+a[d]+"] "}if(b){b=JSON.parse(b);for(var e in b)for(var f in b[e])c+=e+"["+f+":"+b[e][f]+"] "}return c}function printLog(){var a=handleStorage(localStorage.cloudaLog,localStorage.cloudaFuncs),b="http://developer.baidu.com/lightapp/statis/cloudaapi?callback=printlogCallback&data="+encodeURIComponent(a);loadScript(b,function(){console.log("print log ok.")}),window.printlogCallback=function(){localStorage.removeItem("cloudaLog"),localStorage.removeItem("cloudaFuncs")}}if("object"==typeof window){"undefined"==typeof window.clouda&&(window.clouda={}),window.Blend&&window.Blend.ui&&(clouda.ui=Blend.ui),window.Blend=window.blend=clouda,window.cloudaapiInitCount||(window.cloudaapiInitCount={},cloudaapiInitCount.lightInit=0,cloudaapiInitCount.load=0);var stack=[],api_version_list={fs:"1.1",media:"1.3",account:"1.4",connection:"1.1",geolocation:"1.5",app:"1.7",pay:"1.6",qr:"1.0",socialshare:"3.2",BlendUI:"1.1",BlendWebUI:"1.3",push:"1.6",vtt_tts:"1.1",smartBar:"2.1",monitor:"1.2"},device_apis={accelerometer:[],activity:["start","checkSupport"],battery:["get","startListen","stopListen","checkSupport"],compass:[],connection:["get","checkSupport"],contact:[],device:["getImei","getSysVersion","getDeviceModelName","getScreenSize","checkSupport"],fs:["post","checkSupport"],geolocation:["get","startListen","stopListen","checkSupport"],globalization:["getlocale","checkSupport"],gyro:[],localStorage:[],media:["captureMedia","operateMedia","checkSupport"],notification:[],qr:["startCapture","checkSupport"],screen:[],orientation:["setOrientation","checkSupport"],keyboard:["startListenKeyboard","stopListenKeyboard"]},mbaas_apis={account:["login","closeLoginDialog","checkSupport","bdLogin"],app:["followSite","checkFollow","checkSupport"],pay:["init","doPay","checkSupport"],socialshare:["callShare","checkSupport"],push:["registerUnicast","unregisterUnicast","registerMulticast","unregisterMulticast","getUniqueId","isBind","checkSupport"],vtt:["init","showDialog"],tts:["say"],subscribe:["setPanel","showPanel"],feedback:["addFeedback","getFeedback"]},lego_apis={smartBar:["show","hide","setViewItems","setShowViewItem","setTheme"],monitor:["create","click","error","send"]};"function"!=typeof clouda.lightapp&&(clouda.lightapp=function(ak,callback){if(clouda.lightapp.ak=ak,clouda.device&&clouda.mbaas&&clouda.mbaas.pay)"function"==typeof callback&&callback();else{var domain;domain="http:"===window.location.protocol?"http://apps.bdimg.com":"https://openapi.baidu.com",loadScript(domain+"/cloudaapi/s/api-0.5.5.js",function(){if("function"==typeof callback&&callback(),mystack=stack,mystack.length){for(var qq=0;qq<mystack.length;qq++)eval(mystack[qq].func).apply(null,mystack[qq].arg);mystack.length=0}})}initStack(["activity","battery","connection","device","fs","geolocation","globalization","media","qr","account","app","pay"])}),"function"!=typeof clouda.lightInit&&(clouda.lightInit=function(obj,callback){obj.ak&&(clouda.lightapp.ak=obj.ak);var apis=obj.module;try{var cloudaImei=localStorage.getItem("cloudaImei");cloudaImei||(cloudaImei=(Math.random()+"").substring(2,8)+(Math.random()+"").substring(2,8),localStorage.setItem("cloudaImei",cloudaImei));var logObj=localStorage.getItem("cloudaLog");if(logObj)try{logObj=JSON.parse(logObj),(new Date).getTime()-logObj.lastTime>216e5&&printLog()}catch(e){console.log(e)}else{var log={};log.ak=obj.ak,log.url=location.href,log.apis=apis.join("|"),log.platform=navigator.userAgent.match(/(iphone)|(ipad)/i)?"IOS":navigator.userAgent.match(/android/i)?"Android":"other",log.lastTime=(new Date).getTime(),log.imei=cloudaImei,localStorage.setItem("cloudaLog",JSON.stringify(log))}}catch(e){console.error(e)}for(var ii=0,len=apis.length;len>ii;ii++)if("vtt_tts"==apis[ii]){apis.push("vtt"),apis.push("tts");break}initStack(apis);for(var v,apis_v=[],i=apis.length-1;i>=0;i--){if("blendui"==apis[i]){var ua=navigator.userAgent,reg=/BlendUI/i;apis[i]=reg.test(ua)?"BlendUI":"BlendWebUI"}v=api_version_list[apis[i]],apis_v[i]=apis[i]+"-"+(v?v:"1.0")}var m=apis_v.join("|"),domain;domain="http:"===window.location.protocol?"http://apps.bdimg.com":"https://openapi.baidu.com";var script_url=domain+"/cloudaapi/api-list.js?a="+encodeURIComponent(m);cloudaapiInitCount.lightInit+=1;var apiStartTime={};apiStartTime[script_url]=1*new Date,loadScript(script_url,function(){if(cloudaapiInitCount.load+=1,"function"==typeof callback&&callback(),apiStartTime[script_url]&&apiStartTime[script_url]>0&&clouda.lego.monitor&&clouda.lego.monitor.send&&clouda.lego.monitor.send("comboapi",{dur:1*new Date-apiStartTime[script_url],mods:encodeURIComponent(m)}),stack.length&&cloudaapiInitCount.lightInit===cloudaapiInitCount.load){for(var qq=0;qq<stack.length;qq++)eval(stack[qq].func).apply(null,stack[qq].arg);stack.length=0}})});var script=document.getElementsByName("baidu-tc-cerfication");if(script.length)for(var l=script.length;l--;)if(script[l].getAttribute("data-appid")){clouda.lightapp.appid=script[l].getAttribute("data-appid");break}}}(),function(){function a(){g||(setTimeout(function(){for(var a=0,b=f.length;b>a;a++)try{f[a]()}catch(c){console.error("callBack exe error",c.stack)}f=[]},1),g=!0)}function b(b){if("complete"==document.readyState||"interactive"==document.readyState)try{b(),a()}catch(c){console.error("callBack exe error",c.stack)}else f.push(b)}function c(a,b,c){d(a[b],function(){1>=c-b&&callBackFn&&callBackFn()})}function d(a,b,d){if("[object Array]"!=Object.prototype.toString.apply(a)){var e=document.createElement("script");e.onload=function(){b&&b()},e.onerror=function(){b&&b(new Error("加载失败"))},e.src=a,e.async="async",d&&d.defer&&(e.defer="defer"),e.type="text/javascript",e.charset="utf-8",document.head.appendChild(e)}else for(var f=(a.length,0),g=a.length;g>f;f++)c(a[f],f,g)}function e(a,b){if(null!==a&&"undefined"!=a||null!==b&&"undefined"!==b){clouda.lego.smartBar._cacheAppCallBackFnName=h,window[h]=function(a){a&&0===a.error_code?(clouda.lego.smartBar._cacheAppData=a,clouda.lego.smartBar._cacheAppState="loadEnd",clouda.lightapp.ak=a.app_info.api_key):clouda.lego.smartBar._cacheAppState="loadError"},clouda.lego.smartBar._cacheAppState="loadStart";var c=localStorage.getItem("xnSmartBarCacheKey_"+a),e={};c&&(e.defer=!0);var f=i;a?f+="?m_code="+a:b&&(f+="?app_id="+b),d(f+"&callback="+h,function(a){clouda.lego.smartBar._cacheAppState=a?"loadError":"loadEnd",setTimeout(function(){delete window[h]},2e3)},e)}}var f=[],g=!1;window.addEventListener("DOMContentLoaded",function(){a()}),window.addEventListener("load",function(){a()}),"undefined"!=typeof clouda&&(clouda.lego||(clouda.lego={}),clouda.lego.smartBar||(clouda.lego.smartBar={})),clouda.lego.smartBar._smartBarCSSELID="xnSmartBarCacheCSSID";var h="xnBBBBBCallBackFn"+parseInt(1e5*Math.random()+1e3,10),i="//m.baidu.com/lightapp/navbar/get";clouda.lego._initSmartBar=function(a,c){b(function(){clouda.lego.smartBar._cacheAppState||(e(a,c),clouda.lego.mAppId=a,clouda.lightInit({ak:null,module:["monitor","smartBar","app","push","socialshare"]}))})},clouda.lightapp.appid&&clouda.lego._initSmartBar(null,clouda.lightapp.appid)}();